<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>在线文本差异对比,文本比对,文本比较工具,在线文本比较合并工具</title>
<meta charset="utf-8"/>
<meta name="description" content="本工具可以方便大家快速对比两个文本文件中的不同之处，可以自动对两段文本比较，标注不同之处，结果清晰明了，可快速替换差异内容并将结果直接下载。">
<meta name="keywords" content="在线文本差异对比,文本对比,文本比较,文本比较工具,代码差异对比,内容差异对比">
<link rel=stylesheet href="static/css/docs.css">
<link rel=stylesheet href="static/css/codemirror.css">
<link rel=stylesheet href="static/css/merge.css">
<script src="static/js/codemirror.js"></script>
<script src="static/js/xml.js"></script>
<script src="static/js/css.js"></script>
<script src="static/js/javascript.js"></script>
<script src="static/js/htmlmixed.js"></script>
<script src="static/js/diff_match_patch.js"></script>
<script src="static/js/merge.js"></script>
<style>
    /* 以下为演示内容，请添加您自己的内容 ~_~ */
    .CodeMirror { line-height: 1.2; }
    span.clicky {
      cursor: pointer;
      background: #d70;
      color: white;
      padding: 0 3px;
      border-radius: 3px;
    }
    article {
      color: #666;
      background-image: radial-gradient(currentColor .5px, transparent .5px);
      background-size: calc(13 * .5px) calc(13 * .5px);
    }
  </style>
</head>
<body>
<article>
<h2><a href="/fe" style="text-decoration: none;">首页</a> | ▀▄ 在线文本比较合并工具</h2>


<div id=view></div>
</article>

<script>
var value, orig1, orig2, dv, panes = 2, highlight = true, connect = "align", collapse = false;
function initUI() {
  if (value == null) return;
  var target = document.getElementById("view");
  target.innerHTML = "";
  dv = CodeMirror.MergeView(target, {
    value: value,
    origLeft: panes == 3 ? orig1 : null,
    orig: orig2,
    lineNumbers: true,
    mode: "text/html",
    highlightDifferences: highlight,
    connect: connect,
    collapseIdentical: collapse,
    readOnly: false,
    allowEditingOriginals: true
  });
}

function toggleDifferences() {
  dv.setShowDifferences(highlight = !highlight);
}

window.onload = function() {
  value = document.getElementsByTagName('style')[0].innerHTML;
  orig1 = "<!doctype html>\n\n" + value.replace(/\.\.\//g, "codemirror/").replace("yellow", "orange");
  orig2 = value.replace(/\u003cscript/g, "\u003cscript type=text/javascript ")
    .replace('<head>', '\n<head>')
    .replace('~_~', '^.^')
    .replace("white", "purple;\n      font: comic sans;\n      text-decoration: underline;\n      height: 15em");
  initUI();
  let d = document.createElement("div"); 
  d.style.cssText = "width: 50px; margin: 7px; height: 14px"; 
  dv.editor().addLineWidget(57, d);
};

function mergeViewHeight(mergeView) {
  function editorHeight(editor) {
    if (!editor) return 0;
    return editor.getScrollInfo().height;
  }
  return Math.max(editorHeight(mergeView.leftOriginal()),
                  editorHeight(mergeView.editor()),
                  editorHeight(mergeView.rightOriginal()));
}

function resize(mergeView) {
  var height = mergeViewHeight(mergeView);
  for(;;) {
    if (mergeView.leftOriginal())
      mergeView.leftOriginal().setSize(null, height);
    mergeView.editor().setSize(null, height);
    if (mergeView.rightOriginal())
      mergeView.rightOriginal().setSize(null, height);

    var newHeight = mergeViewHeight(mergeView);
    if (newHeight >= height) break;
    else height = newHeight;
  }
  mergeView.wrap.style.height = height + "px";
}
</script>
<script>
  var _hmt = _hmt || [];
  (function () {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?96d9604e16c1245896d37f6e50c29669";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
  })();
  </script>
</body>
</html>
