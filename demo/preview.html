<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>在线 html 5 代码编辑预览</title>
<meta charset="utf-8"/>
<meta name="description" content="在线 html 5 代码编辑预览，你可以在网页中进行前端代码开发，或者在手机上随时随地进行前端代码开发。">
<meta name="keywords" content="在线代码编辑器,web代码编辑器，移动端代码编辑器,webide,手机端代码编辑器，网页代码编辑器">
<link rel=stylesheet href="static/css/docs.css">
<link rel=stylesheet href="static/css/codemirror.css">
<link rel="stylesheet" href="static/css/night.css">
<link rel="stylesheet" href="static/css/foldgutter.css" />
<script src="static/js/codemirror.js"></script>
<script src="static/js/closetag.js"></script>
<script src="static/js/foldcode.js"></script>
<script src="static/js/foldgutter.js"></script>
<script src="static/js/brace-fold.js"></script>
<script src="static/js/xml-fold.js"></script>
<script src="static/js/indent-fold.js"></script>
<script src="static/js/xml.js"></script>
<script src="static/js/javascript.js"></script>
<script src="static/js/css.js"></script>
<script src="static/js/htmlmixed.js"></script>
<script src="static/js/active-line.js"></script>
<script src="static/js/matchtags.js"></script>
<script src="static/js/trailingspace.js"></script>
<style type=text/css>
      .CodeMirror {
        float: left;
        width: 50%;
        border: 1px solid black;
        height: 600px;
      }
      iframe {
        width: 49%;
        float: left;
        height: 600px;
        border: 1px solid black;
        border-left: 0px;
      }
      .cm-trailingspace {
        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAYAAAB/qH1jAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QUXCToH00Y1UgAAACFJREFUCNdjPMDBUc/AwNDAAAFMTAwMDA0OP34wQgX/AQBYgwYEx4f9lQAAAABJRU5ErkJggg==);
        background-position: bottom left;
        background-repeat: repeat-x;
      }
      .btns {
        clear: both;
        padding-top: 10px;
      }
      .btns .btn {
        display: inline-block;
        margin-bottom: 0;
        font-weight: 400;
        text-align: center;
        vertical-align: middle;
        cursor: pointer;
        background-image: none;
        border: 1px solid transparent;
        white-space: nowrap;
        padding: 6px 12px;
        font-size: 14px;
        line-height: 1.42857143;
        border-radius: 4px;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        width: 150px;
        color: #fff;
        background-color: #428bca;
        border-color: #357ebd;
        margin-right: 10px;
      }
      .btns .btn:hover {
        color: #fff;
        background-color: #3276b1;
        border-color: #285e8e;
      }
      article {
        color: #666;
        background-image: radial-gradient(currentColor .5px, transparent .5px);
        background-size: calc(13 * .5px) calc(13 * .5px);
      }
    </style>
</head>
<body>
<article>
<h2><a href="/fe" style="text-decoration: none;">首页</a> | ▀▄ 在线 html 5 代码编辑预览</h2>
  <textarea id="code" name="code">
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>修改代码，右边会自动显示结果</title>
    <!--适应移动端-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--css样式-->
    <style>
      body{background-color: #EBEBEB}
      .aaa{background-color: #CB4F51;padding: 10px;display: block}
    </style>
    <!--引用jquery库-->
    <script src="https://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
  </head>
  <body>

    <h3>这是一个简单的点击效果</h3>

    <div class="aaa">
        点击我
    </div>

    <script type="text/javascript">
      $(document).ready(function(){
          // 点击
          $(".aaa").click(function(){
              alert("你好！");
          });
          // 悬停到目标上
          $(".aaa").mouseover(function(){
              $(this).css("background-color","#0060ff");
          }); 
          // 悬停离开
          $(".aaa").mouseout(function(){ 
              $(this).css("background-color","#CB4F51");
          });
      });
    </script>

  </body>
</html>
    </textarea>
    <iframe id="preview"></iframe>
    <div class="btns"><!-- <button class="btn" id="format-btn">格式化代码</button> --><button class="btn" id="download-btn">下载 html 文件</button></div>
    <script src="https://cdn.bootcdn.net/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js"></script>
    <script>
      var delay;
      // Initialize CodeMirror editor with a nice html5 canvas demo.
      var editor = CodeMirror.fromTextArea(document.getElementById('code'), {
        mode: 'text/html',
        lineNumbers: true,
        lineWrapping: true,
        styleActiveLine: true,
        autoCloseTags: true,
        foldGutter: true,
        gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"],
        matchTags: {bothTags: true},
        showTrailingSpace: true
      });
      editor.setOption("theme", "night");
      editor.on("change", function() {
        clearTimeout(delay);
        delay = setTimeout(updatePreview, 300);
      });
      
      function updatePreview() {
        var previewFrame = document.getElementById('preview');
        var preview =  previewFrame.contentDocument ||  previewFrame.contentWindow.document;
        preview.open();
        preview.write(editor.getValue());
        preview.close();
      }
      setTimeout(updatePreview, 300);

      function getSelectedRange() {
        return { from: editor.getCursor(true), to: editor.getCursor(false) };
      }
      
      function autoFormatSelection() {
        var range = getSelectedRange();
        editor.autoFormatRange(range.from, range.to);
      }
      
      function commentSelection(isComment) {
        var range = getSelectedRange();
        editor.commentRange(isComment, range.from, range.to);
      }

/*       var $formatBtn = document.getElementById('format-btn');
      $formatBtn.onclick = function () {
      } */

      var $dowloadBtn = document.getElementById('download-btn');
      $dowloadBtn.onclick = function () {
        var blob = new Blob([editor.getValue()], {type: "text/plain;charset=utf-8"});
        saveAs(blob, new Date().valueOf() + ".html");
      }
    </script>
  </article>
  <script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?96d9604e16c1245896d37f6e50c29669";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
    </script>
  </body>
  </html>
  
